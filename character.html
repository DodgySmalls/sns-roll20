<script type="text/worker">
const attributes = ["str", "dex", "for", "int", "cog", "ard"];
const aptitudes = ["agility", "alertness", "athletics", "brawn", "charisma", "conviction", "coordination", 
                    "endurance", "finesse", "focus", "initiative", "insight", "intuition", "knowledge", "logic",
                    "reflexes", "resilience", "scrutiny", "willpower", "wisdom", "wit"];
                    
const aptitudeDefaults = {
    "agility_mj": "dex",
    "agility_mn": "str",
    "alertness_mj": "cog",
    "alertness_mn": "dex",
    "athletics_mj": "str",
    "athletics_mn": "for",
    "brawn_mj": "str",
    "brawn_mn": "str",
    "charisma_mj": "ard",
    "charisma_mn": "int",
    "conviction_mj": "ard",
    "conviction_mn": "ard",
    "coordination_mj": "dex",
    "coordination_mn": "str",
    "endurance_mj": "for",
    "endurance_mn": "str",
    "finesse_mj": "dex",
    "finesse_mn": "dex",
    "focus_mj": "cog",
    "focus_mn": "for",
    "initiative_mj": "ard",
    "initiative_mn": "dex",
    "insight_mj": "cog",
    "insight_mn": "ard",
    "intuition_mj": "cog",
    "intuition_mn": "cog",
    "knowledge_mj": "int",
    "knowledge_mn": "cog",
    "logic_mj": "int",
    "logic_mn": "int",
    "reflexes_mj": "dex",
    "reflexes_mn": "int",
    "resilience_mj": "for",
    "resilience_mn": "for",
    "scrutiny_mj": "cog",
    "scrutiny_mn": "int",
    "willpower_mj": "ard",
    "willpower_mn": "str",
    "wisdom_mj": "cog",
    "wisdom_mn": "int",
    "wit_mj": "int",
    "wit_mn": "ard"
};
                    
function updateAptitudes() {
    getAttrs(
        attributes,
        function(attrValues){
            attrValues.str = parseInt(attrValues.str);
            attrValues.dex = parseInt(attrValues.dex);
            attrValues.for = parseInt(attrValues.for);
            attrValues.int = parseInt(attrValues.int);
            attrValues.cog = parseInt(attrValues.cog);
            attrValues.ard = parseInt(attrValues.ard);
            
            for(let i=0; i < aptitudes.length; i++) {
                updateAptitude(aptitudes[i], attrValues);
            }
        }
    );   
}

function updateAptitude(apt, attributes = null) {
    let major = apt + "_mj";
    let minor = apt + "_mn";
    let adjust = apt + "_adjust";
    let override = apt + "_override";
        
    getAttrs(
        [major, minor, adjust, override],
        function(values) {
            if(values.hasOwnProperty(major)) {
                values[major] = parseInt(values[major]);
            }
            
            if(values.hasOwnProperty(minor)) {
                values[minor] = parseInt(values[major]);
            }
            
            if(values.hasOwnProperty(adjust)) {
                values[adjust] = parseInt(values[adjust]);
            } else {
                values[adjust] = 0;
            }
            
            if(values.hasOwnProperty(override)) {
                values[override] = parseInt(values[override]);
            }
            
            //if an override is defined immediately ignore other options and resolve the value to the override value
            if(values.hasOwnProperty(override)) {
                let update = {};
                update[apt] = Math.ceil(values[override]);
                setAttrs(update);
            }
            
            //if no override is present, calculate the value of the aptitude
            let mjAttr = values.hasOwnProperty(major) ? values[major] : aptitudeDefaults[major];
            let mnAttr = values.hasOwnProperty(minor) ? values[minor] : aptitudeDefaults[minor];
        
            if(attributes != null) {
                let update = {};
                update[apt] = Math.ceil(values[adjust] + ((attributes[mjAttr] + attributes[mnAttr]) / 2));
                setAttrs(update);
            } else {
                getAttrs(
                    attributes,
                    function(attrValues) {
                        let update = {};
                        update[apt] = Math.ceil(values[adjust] + ((attrValues[mjAttr] + attrValues[mnAttr]) / 2));
                        setAttrs(update);
                    }
                );
            }
            
        }
    );
}

on("change:str", function(eventInfo) {
    updateAptitudes();
});

on("change:dex", function(eventInfo) {
    updateAptitudes();
});

on("change:for", function(eventInfo) {
    updateAptitudes();
});

on("change:int", function(eventInfo) {
    updateAptitudes();
});

on("change:cog", function(eventInfo) {
    updateAptitudes();
});

on("change:ard", function(eventInfo) {
    updateAptitudes();
});

</script>

<div class="wrapper">
    <div class="header">
        <table>
            <tr class="header-fields">
                <td rowspan="3" class="splash"></td>
                <td>
                    <input type="text" name="attr_character_title" style="text-align:right;"/>
                </td>
                <td>
                    <input type="text" name="attr_character_name" />
                </td>
                <td>
                    <input type="text" name="attr_character_honourific" />
                </td>
                <td>
                    <input type="number" name="attr_character_level" value="0" />
                </td>
                <td>
                    <input type="text" name="attr_character_class" />
                </td>
                <td>
                    <input type="text" name="attr_character_species" style="width:50px;"/>
                </td>
            </tr>
            <tr class="row-under-field">
                <td>
                    Title
                </td>
                <td>
                    Name
                </td>
                <td>
                    Honourific
                </td>
                <td>
                    Level
                </td>
                <td>
                    Class
                </td>
                <td>
                    Species
                </td>
            </tr>
            <tr>
                <td colspan="6" style="vertical-align:text-top;padding-top: 3px;">

                    <label class="switch">
                        <input class="switch-input" type="checkbox" name="attr_privaterolls" />
                        <span class="switch-on">GM</span>
                        <span class="switch-off">All</span>
                        <span class="switch-handle"></span> 
                    </label>
                    
                    <div class="resource-radial">
                        <div class="resource-fate">
                            <input type="radio" value="5" name="attr_fate" /><span><div>f</div></span>
                            <input type="radio" value="4" name="attr_fate" /><span><div>f</div></span>
                            <input type="radio" value="3" name="attr_fate" /><span><div>f</div></span>
                            <input type="radio" value="2" name="attr_fate" /><span><div>f</div></span>
                            <input type="radio" value="1" name="attr_fate" /><span><div>f</div></span>
                            <label>
                                <span>FATE</span>
                                <input type="radio" value="0" name="attr_fate" style="display:none;" checked="true">
                            </label> 
                        </div>
                    </div>
                </td>
            </tr>
        </table>
        
    </div><!-- end header -->
    
    <div class="content">
        <input type="radio" name="attr_tab" class="tab tab-main" value="1" checked="checked"><span>Main</span>
        <input type="radio" name="attr_tab" class="tab tab-inventory" value="2"><span>Inventory</span>
        <input type="radio" name="attr_tab" class="tab tab-levels" value="3"><span>Levels</span>
        <input type="radio" name="attr_tab" class="tab tab-info" value="4"><span>Info</span>
        <input type="radio" name="attr_tab" class="tab tab-spells" value="5"><span>Spells</span>
        
        <div class="tab-content tab-main">
            <div class="row-layout">
                <div class="column" style="width: 400px;">
                    
                    <div class="resources">
                        
                        <h3>Resources</h3>
                        
                        <table class="resource-main-table">
                            <tr>
                                <td>
                                    <div class="resource resource-hp">
                                        <div class="numerator value-with-temp">
                                            <input type="number" name="attr_hp" class="centered-number" value="10" />
                                            <input type="number" name="attr_hp_temp" class="centered-number" value="0" />
                                        </div>    
                
                                        <div class="denominator">
                                            <input type="number" name="attr_hp_max" class="centered-number" value="10" />
                                            <span>Hitpoints</span>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="resource resource-stamina">
                                
                                        <div class="numerator value-with-temp">
                                            <input type="number" name="attr_stamina" class="centered-number" value="10" />
                                            <input type="number" name="attr_stamina_temp" class="centered-number" value="0" />
                                        </div>
                                        
                                        <div class="denominator">
                                            <input type="number" name="attr_stamina_max" class="centered-number" value="10" />
                                            <span>Stamina</span>
                                        </div>
                                    </div>
                                </td>
                                <td rowspan="2">
                                    <div class="resource">
                                        Tension
                                        <input type="number" name="attr_tension" class="centered-number" />
                                        <input type="number" name="attr_tension_max" class="centered-number" value="30" disabled style="display:none;" />
                                    </div>
                                    <div class="resource">
                                        Volatility
                                        <input type="number" name="attr_volatility" class="centered-number" />
                                        <input type="number" name="attr_volatility_max" class="centered-number" value="30" disabled style="display:none;" />
                                    </div>
                                    <div class="resource>">
                                        Exhaustion
                                        <input type="number" name="attr_exhaustion" class="centered-number" />
                                    </div>
                                    <div class="resource">
                                        Reaction
                                        <input type="checkbox" name="attr_reaction" checked="checked" />
                                    </div>
                                </td>
                            </tr>
                            <tr style="vertical-align: top;">
                                <td>
                                    <div class="resource resource-death-threshold">
                                        <div class="header-small-caps">Death Threshold</div>
                                        <input type="number" name="attr_death_threshold" class="centered-number" value="30" />
                                    </div>
                                </td>
                                <td>
                                    <div class="resource-radial resource-confidence">
                                        <label>
                                            <div class="header-small-caps">Confidence</div>
                                             <input type="radio" value="0" name="attr_confidence" style="display:none;" checked="true" />
                                        </label>
                                        <div class="resource-confidence-row">
                                            <input type="radio" value="2" name="attr_confidence" /><span><div>A</div></span>
                                            <input type="radio" value="3" name="attr_confidence" /><span><div>A</div></span>
                                            <input type="radio" value="1" name="attr_confidence" /><span><div>A</div></span>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </table>
                            
                    </div>
                    
                    <div class="attributes-aptitudes">
                        
                        <div class="row-layout">
                            
                            <div class="attributes">
                                <h3>Attributes</h3>
                                <div class="attribute">
                                    <input type="number" name="attr_str" value="-2" class="centered-number" />
                                    <div class="attribute-title">Strength</div>
                                </div>
                                <div class="attribute">
                                    <input type="number" name="attr_dex" value="-2" class="centered-number" />
                                    <div class="attribute-title">Dexterity</div>
                                </div>
                                <div class="attribute">
                                    <input type="number" name="attr_for" value="-2" class="centered-number" />
                                    <div class="attribute-title">Fortitude</div>
                                </div>
                                <div class="attribute">
                                    <input type="number" name="attr_int" value="-2" class="centered-number" />
                                    <div class="attribute-title">Intellect</div>
                                </div>
                                <div class="attribute">
                                    <input type="number" name="attr_cog" value="-2" class="centered-number" />
                                    <div class="attribute-title">Cognizance</div>
                                </div>
                                <div class="attribute">
                                    <input type="number" name="attr_ard" value="-2" class="centered-number" />
                                    <div class="attribute-title">Ardor</div>
                                </div>
                                
                            </div>
                        
                            <div class="column aptitudes">
                                <h3>Aptitudes</h3>
                                <div class="aptitude">
                                    <input type="number" name="attr_brawn"  />
                                    Brawn
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_finesse" />
                                    Finesse
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_resilience" />
                                    Resilience
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_athletics" />
                                    Athletics
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_athletics" />
                                    Agility
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_coordination" />
                                    Coordination
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_coordination" />
                                    Endurance
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_focus"/>
                                    Focus
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_alertness" />
                                    Alertness
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_reflexes" />
                                    Reflexes
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_willpower" />
                                    Willpower
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_initiative" />
                                    Initiative
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_knowledge" />
                                    Knowledge
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_charisma" />
                                    Charisma
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_wisdom" />
                                    Wisdom
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_scrutiny" />
                                    Scrutiny
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_wit" />
                                    Wit
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_logic" />
                                    Logic
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_intuition" />
                                    Intuition
                                </div>
                                <div class="aptitude">
                                    <input type="number" name="attr_conviction" />
                                    Conviction
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    
                    <div class="skills">
                        <h3>Skills</h3>
                        <fieldset class="repeating_skill">
                            <div class="skill-wrapper">
                                <input type="text" name="attr_skill" placeholder="Skill"/>
                                Expertise
                                <input type="checkbox" name="attr_expert" />
                            </div>
                        </fieldset>
                    </div>
                    
                    
                    <div class="abilities">
                        <h3>Abilities</h3>
                    
                        <fieldset class="repeating_ability">
                            <div class="repeating-with-extension ability-wrapper">
                               
                                <input class="extended-content-switch" type="checkbox" name="attr_extended" />
                                <span>W</span>
                                
                                <input type="text" name="attr_ability_name" placeholder="name" />
                                <div class="extended-content">
                                    <div>Description</div>
                                    <div>
                                        <textarea name="attr_ability_description"></textarea>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    
                </div><!-- end column -->
        
                <div class="column">
                    
                    <div class="armour">
                        
                        <h3>Armour</h3>
                        
                        <input type="hidden" name="attr_toughness" value="5" disabled>

                        <div class="armour-slot armour-head">
                            <span class="header-small-caps">Head</span>
                            <input type="number" name="attr_head_defense" value="(ceil(@{toughness} + @{head_armour} + @{global_evasion}))" disabled class="def centered-number"/>
                            <input type="number" name="attr_head_armour" value="(@{local_head_item_armour} + @{local_head_armour_adjust})" disabled style="display:none;" />
                            <input type="text" name="attr_local_head_item_armour" placeholder="L" class="text-number armour-local" /><input type="text" name="attr_global_head_item_armour" placeholder="G" class="text-number armour-global" />
                            <input type="text" name="attr_local_head_armour_adjust" placeholder="tmp" class="text-number val-adjust" />
                            E:
                            <input type="text" name="attr_head_item_encumbrance" placeholder="enc" class="text-number" />
                            <input type="text" name="attr_head_item_name" placeholder="item..." />
                        </div>
                        
                        <div class="armour-slot armour-body">
                            <span class="header-small-caps">Body</span>
                            <input type="number" name="attr_body_defense" value="(ceil(@{toughness} + @{body_armour} + @{global_evasion}))" disabled class="def centered-number"/>
                            <input type="number" name="attr_body_armour" value="(@{local_body_item_armour} + @{local_body_armour_adjust})" disabled style="display:none;" />
                            <input type="text" name="attr_local_body_item_armour" placeholder="L" class="text-number armour-local" /><input type="text" name="attr_global_body_item_armour" placeholder="G" class="text-number armour-global" />
                            <input type="text" name="attr_local_body_armour_adjust" placeholder="tmp" class="text-number val-adjust" />
                            E:
                            <input type="text" name="attr_body_item_encumbrance" placeholder="enc" class="text-number" />
                            <input type="text" name="attr_body_item_name" placeholder="item..." />
                        </div>
                        
                        <div class="armour-slot armour-hand">
                            <span class="header-small-caps">Hand</span>
                            <input type="number" name="attr_hand_defense" value="(ceil(@{toughness} + @{hand_armour} + @{global_evasion}))" disabled class="def centered-number"/>
                            <input type="number" name="attr_hand_armour" value="(@{local_hand_item_armour} + @{local_hand_armour_adjust})" disabled style="display:none;" />
                            <input type="text" name="attr_local_hand_item_armour" placeholder="L" class="text-number armour-local"/><input type="text" name="attr_global_hand_item_armour" placeholder="G" class="text-number armour-global"/>
                            <input type="text" name="attr_local_hand_armour_adjust" placeholder="tmp" class="text-number val-adjust" />
                            E:
                            <input type="text" name="attr_hand_item_encumbrance" placeholder="enc" class="text-number" />
                            <input type="text" name="attr_hand_item_name" placeholder="item..." />
                        </div>
                        
                        <div class="armour-slot armour-foot">
                            <span class="header-small-caps">Foot</span>
                            <input type="number" name="attr_foot_defense" value="(ceil(@{toughness} + @{foot_armour} + @{global_evasion}))" disabled class="def centered-number"/>
                            <input type="number" name="attr_foot_armour" value="(@{local_foot_item_armour} + @{local_foot_armour_adjust})" disabled style="display:none;" />
                            <input type="text" name="attr_local_foot_item_armour" placeholder="L" class="text-number armour-local" /><input type="text" name="attr_global_foot_item_armour" placeholder="G" class="text-number armour-global" />
                            <input type="text" name="attr_local_foot_armour_adjust" placeholder="tmp" class="text-number val-adjust"/>
                            E:
                            <input type="text" name="attr_foot_item_encumbrance" placeholder="enc" class="text-number" />
                            <input type="text" name="attr_foot_item_name" placeholder="item..." />
                        </div>
                    
                        
                        Global Armour
                        <input type="number" name="attr_global_armour" 
                            value="(@{global_head_item_armour} + @{global_body_item_armour} + @{global_hand_item_armour} + @{global_foot_item_armour} + @{global_armour_adjust})" 
                            disabled />
                        <input type="text" name="attr_global_armour_adjust" placeholder="tmp" class="text-number val-adjust"/>
                        
                    
                        Evasion <input type="number" name="attr_global_evasion" value="(((@{global_evasion_uncapped} + @{evasion_cap}) - abs(@{global_evasion_uncapped} - @{evasion_cap})) / 2)" disabled />
                        <input type="number" name="attr_global_evasion_uncapped" value="(@{dex} + 5 + @{evasion_adjust})" disabled style="display:none;" />
                        <input type="text" name="attr_evasion_adjust" placeholder="tmp" class="text-number val-adjust" />
                        
                        <br/>        
                        
                        Global Defense
                        <input type="number" name="attr_global_defense"
                            value="(ceil(@{toughness} + @{global_armour} + @{global_evasion}))" disabled class="def global-def centered-number"/>
                            
                        Evasion Cap    
                        <input type="text" name="attr_evasion_cap" placeholder="cap" value="10" class="text-number" />
                        
                        <br/>
                        Footspeed: <input type="number" name="attr_footspeed" value="5"/>m
                        <br/>
                        Encumbrance:
                        <input type="number" name="attr_encumbrance" disabled 
                            value="(@{head_item_encumbrance} + @{body_item_encumbrance} + @{hand_item_encumbrance} + @{foot_item_encumbrance})"/>
                        | <input type="number" name="attr_encumbrance_max" value="10"/> 
                    </div>
                    
                    <div class="weapons">
                        <h3>Weapons</h3>
                        <fieldset class="repeating_weapon">
                            <div class="repeating-with-extension weapon-wrapper">
                               
                                <input class="extended-content-switch" type="checkbox" name="attr_extended" checked="checked" />
                                <span>W</span>
                                
                                <input class="weapon-melee-flag" type="checkbox" name="attr_weapon_melee" checked="checked"/><div>M</div>
                                <input class="weapon-ranged-flag" type="checkbox" name="attr_weapon_ranged" /><div>R</div>
                                
                                <input type="text" name="attr_weapon_name" placeholder="Name"/> 
                                

                                

                                
                                <input class="weapon-precision" type="number" name="attr_weapon_precision" value="0" />
                                <input type="number" name="attr_weapon_attr_mult" value="0" />
                                <select class="attribute-select" name="attr_attr_a">
                                    <option value="str">S</option>
                                    <option value="dex">D</option>
                                    <option value="for">S</option>
                                    <option value="int">I</option>
                                    <option value="cog">C</option>
                                    <option value="ard">A</option>
                                </select>
                                <select class="attribute-select" name="attr_attr_b">
                                    <option value="str">S</option>
                                    <option value="dex">D</option>
                                    <option value="for">S</option>
                                    <option value="int">I</option>
                                    <option value="cog">C</option>
                                    <option value="ard">A</option>
                                </select>
                                
                                
                                <!-- TODO edit in extended content, find a way to replicate fields to display in normal profile? -->
                                <div class="weapon-melee-content">
                                    Melee Profile
                                    <table>
                                        <tr>
                                            <td>
                                                <input type="number" name="attr_weapon_range_incr_m1" value="0"/>
                                            </td>
                                            <td>
                                                <input type="number" name="attr_weapon_range_incr_m2" value="1"/>
                                            </td>
                                            <td>
                                                <input type="number" name="attr_weapon_range_incr_m3" value="2"/>
                                            </td>
                                            <td>
                                                <input type="number" name="attr_weapon_range_incr_m4" value="3"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <input type="text" name="attr_weapon_damage_m1" value="1d4"/>
                                            </td>
                                            <td>
                                                <input type="text" name="attr_weapon_damage_m2" value="1d4"/>
                                            </td>
                                            <td>
                                                <input type="text" name="attr_weapon_damage_m3" value="1d4"/>
                                            </td>
                                            <td>
                                                <input type="text" name="attr_weapon_damage_m4" value="1d4"/>
                                            </td>
                                        </tr>
                                    </table>
                                    
                                </div>
                                
                                <div class="weapon-ranged-content">
                                    Ranged Profile
                                    <table>
                                        <tr>
                                            <td>
                                                <input type="number" name="attr_weapon_range_incr_r1" value="0"/>
                                            </td>
                                            <td>
                                                <input type="number" name="attr_weapon_range_incr_r2" value="5"/>
                                            </td>
                                            <td>
                                                <input type="number" name="attr_weapon_range_incr_r3" value="25"/>
                                            </td>
                                            <td>
                                                <input type="number" name="attr_weapon_range_incr_r4" value="100"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <input type="text" name="attr_weapon_damage_r1" value="1d4"/>
                                            </td>
                                            <td>
                                                <input type="text" name="attr_weapon_damage_r2" value="1d4"/>
                                            </td>
                                            <td>
                                                <input type="text" name="attr_weapon_damage_incr_r3" value="1d4"/>
                                            </td>
                                            <td>
                                                <input type="text" name="attr_weapon_damage_incr_r4" value="1d4"/>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                
                                <div class="extended-content">
                                    <hr/>
                                    <div>Description</div>
                                    <div>
                                        <textarea name="attr_weapon_description"></textarea>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                        
                        <div class="munitions">
                            <h4>Munitions</h4>
                        
                            <fieldset class="repeating_munition">
                                    <div class="repeating-with-extension munition-wrapper">
                                       
                                        <input class="extended-content-switch" type="checkbox" name="attr_extended" />
                                        <span>W</span>
                                        
                                        <input type="text" name="attr_munition_name" placeholder="name" />
                                        <input type="text" name="attr_munition_damage" placeholder="damage..." />
                                        <div class="extended-content">
                                            <div>Description</div>
                                            <div>
                                                <textarea name="attr_munition_description"></textarea>
                                            </div>
                                        </div>
                                    </div>
                            </fieldset>
                        </div>
                    
                    </div><!-- end weapons -->
                    
                    
                    <div class="features">
                        <h3>Features</h3>
                    
                        <fieldset class="repeating_feature">
                            <div class="repeating-with-extension feature-wrapper">
                               
                                <input class="extended-content-switch" type="checkbox" name="attr_extended" />
                                <span>W</span>
                                
                                <input type="text" name="attr_feature_name" placeholder="name" />
                                <div class="extended-content">
                                    <div>Description</div>
                                    <div>
                                        <textarea name="attr_feature_description"></textarea>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                        
                    <div class="readied-equipment">
                        <h3>Readied Equipment</h3>
                        
                        <div style="width:250px;">
                            <i style="color:#CCCCCC;">This section will contain automatically generated fields to remind you of equipment you currently have readied</i>
                        </div>
                    </div>
                </div><!-- end column -->
            
            </div><!-- end row layout -->
        </div><!-- end main tab -->
        
        <div class="tab-content tab-inventory">
            <h3>Inventory</h3>
            <div class="row-layout">
                <div class="column" style="width:380px; margin-right:20px;">
                    
                    <fieldset class="repeating_item">
                        <div class="repeating-with-extension repeating-binary-content item-wrapper">
                           
                            <input class="binary-content-switch" type="checkbox" name="attr_alternate"/>
                            <span>O</span>
                            
                            <div class="binary-content-a">
                                <div class="container-bottom">
                                    <div class="auto-center-block">
                                        <input type="text" name="attr_container_name" placeholder="Container Name" />
                                        <input type="number" name="attr_container_capacity" placeholder="capacity" />
                                    </div>
                                </div>
                            </div>
                            
                            <div class="binary-content-b">
                                <div class="item-entry">
                                    <input class="extended-content-switch" type="checkbox" name="attr_extended" />
                                    <span>W</span>
                                    <input type="text" name="attr_item_name" placeholder="Item" />
                                    <input type="number" name="attr_item_quantity" placeholder="qty" />
                                    
                                    <div class="extended-content">
                                        <div>Description</div>
                                        <div><textarea name="attr_item_description"></textarea></div>
                                    </div>
                                </div>
                            </div>
        
                        </div>
                    </fieldset>
                    
                </div>
                
                <div class="column" style="width:380px; margin-right:20px;">
                        
                        <fieldset class="repeating_itemAlt">
                        <div class="repeating-with-extension repeating-binary-content item-wrapper">
                           
        
                            <input class="binary-content-switch" type="checkbox" name="attr_alternate"/>
                            <span>O</span>
                            
                            <div class="binary-content-a">
                                <div class="container-bottom">
                                    <div class="auto-center-block">
                                        <input type="text" name="attr_container_name" placeholder="Container Name" />
                                        <input type="number" name="attr_container_capacity" placeholder="capacity" />
                                    </div>
                                </div>
                            </div>
                            
                            <div class="binary-content-b">
                                <div class="item-entry">
                                    <input class="extended-content-switch" type="checkbox" name="attr_extended" />
                                    <span>W</span>
                                    <input type="text" name="attr_item_name" placeholder="Item" />
                                    <input type="number" name="attr_item_quantity" placeholder="qty" />
                                    
                                    <div class="extended-content">
                                        <div>Description</div>
                                        <div><textarea name="attr_item_description"></textarea></div>
                                    </div>
                                </div>
                            </div>
        
                        </div>
                    </fieldset>
                    
                </div>
            </div>
        </div><!-- end inventory tab --> 
        
        <div class="tab-content tab-levels">
            <h3>Levels</h3>
            <fieldset class="repeating_level">
                <div class="repeating-with-extension level-wrapper">
                   
                    <input class="extended-content-switch" type="checkbox" name="attr_extended" checked="checked" />
                    <span>W</span>
                    
                    
                    <input type="text" name="attr_aspect_name" placeholder="Aspect"/>
                    
                    hp
                    <input type="number" name="attr_aspect_hp" value="5" class="centered-number" />
                    
                    <input type="text" name="attr_aspect_feature_name" placeholder="Feature"/>
                    
                    <div class="extended-content">
                        <div>Note</div>
                        <div><textarea name="attr_note"></textarea></div>
                    </div>
                </div>
            </fieldset>
        </div><!-- end levels tab -->
        
        <div class="tab-content tab-info">
            <h3>Info</h3>
            
            <div class="row-layout">
                <div class="column" style="width:380px; margin-right: 20px;">
                    
                    <div class="languages">
                        <h3>Languages</h3>
                        <fieldset class="repeating_language">
                            <div class="repeating-with-extension language-wrapper">
                                
                                <input class="extended-content-switch" type="checkbox" name="attr_extended" checked="checked" />
                                <span>W</span>
                                
                                <input type="text" name="attr_language" placeholder="language" style="width:80px;"/>
                                Understand
                                <input type="checkbox" name="attr_understand" />
                                Speak
                                <input type="checkbox" name="attr_speak" />
                                Read/Write
                                <input type="checkbox" name="attr_readwrite" />
                                
                                <div class="extended-content">
                                    <div>Language Note</div>
                                    <div><textarea name="attr_note"></textarea></div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    
                    <div class="note-group">
                        <h3>Current Notes</h3>
                        <fieldset class="repeating_currentNote">
                            <div class="repeating-with-extension note-wrapper">
                                
                                <input class="extended-content-switch" type="checkbox" name="attr_extended" checked="checked" />
                                <span>W</span>
                                
                                <input type="text" name="attr_subject" placeholder="Subject"/>
        
                                <div class="extended-content">
                                    <div><textarea name="attr_note" placeholder="Note ..." /></textarea></div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    
                    <div class="note-group">
                        <h3>Self</h3>
                        <fieldset class="repeating_selfNote">
                            <div class="repeating-with-extension note-wrapper">
                                
                                <input class="extended-content-switch" type="checkbox" name="attr_extended" checked="checked" />
                                <span>W</span>
                                
                                <input type="text" name="attr_subject" placeholder="Subject"/>
        
                                <div class="extended-content">
                                    <div><textarea name="attr_note" placeholder="Note ..." /></textarea></div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    
                </div><!-- end column -->
                <div class="column" style="width:380px; margin-right: 20px;">
                    <div class="note-group">
                        <h3>Character Notes</h3>
                        <fieldset class="repeating_characterNote">
                            <div class="repeating-with-extension note-wrapper">
                                
                                <input class="extended-content-switch" type="checkbox" name="attr_extended" checked="checked" />
                                <span>W</span>
                                
                                <input type="text" name="attr_subject" placeholder="Subject"/>
        
                                <div class="extended-content">
                                    <div><textarea name="attr_note" placeholder="Note ..." /></textarea></div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                
                    <div class="note-group">
                        <h3>Misc</h3>
                        <fieldset class="repeating_miscNote">
                            <div class="repeating-with-extension note-wrapper">
                                
                                <input class="extended-content-switch" type="checkbox" name="attr_extended" checked="checked" />
                                <span>W</span>
                                
                                <input type="text" name="attr_subject" placeholder="Subject"/>
        
                                <div class="extended-content">
                                    <div><textarea name="attr_note" placeholder="Note ..." /></textarea></div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div><!-- end column -->
                
            </div>
        </div><!-- end info tab-->
        
        <div class="tab-content tab-spells">
            <fieldset class="repeating_spell">
                <div class="repeating-with-extension note-wrapper">
                    <input class="extended-content-switch" type="checkbox" name="attr_extended" checked="checked" />
                    <span>W</span>
                    
                    <input type="text" name="attr_spell_name" placeholder="Spell Name"/>
                    <input type="text" name="attr_spell_resource" placeholder="Resource"/>
                    <select>
                        <option value="none">None</option>
                        <option value="stamina">Stamina</option>
                        <option value="tension">Tension</option>
                    </select>
                    
                    <input type="text" name="attr_spell_range" placeholder="Range"/>
                    
                    Targets
                    <input type="text" name="attr_spell_target" placeholder="Targets"/>

                    
                    <div class="extended-content">
                        <div><textarea name="attr_spell_effect" placeholder="Note ..." /></textarea></div>
                    </div>
                </div>
            </fieldset>
        </div><!--end spells tab -->
    </div><!-- end content -->
</div><!-- end wrapper -->
